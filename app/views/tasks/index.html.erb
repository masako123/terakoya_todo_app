<p id="notice"><%= notice %></p>
<menu>
      <nav>
        <%= select_tag 'order_by', options_for_select(['作成日', '期限日']), {include_blank: '並べ替え'} %>

        <% if user_signed_in? %>
          <%= link_to '自分への割り当て', "/tasks?assignee_id=#{current_user.id}" %>
        <% end %>
        
        <%= select_tag 'assignee', options_for_select(User.pluck(:username, :id)), {include_blank: '担当者を選択'} %>
        <%= select_tag 'user', options_for_select(User.pluck(:username, :id)), {include_blank: '登録者を選択'} %>
        <%= select_tag 'duedate', options_for_select(Task.pluck(:due_date_at).uniq), {include_blank: '期限日を選択'} %>
    
      </nav>
    </menu>
    
<h1>Tasks</h1>

<table>
  <thead>
    <tr>
      <th>タスク名</th>
      <th>内容</th>
      <th>画像</th>
      <th>期限日</th>
      <th>担当者</th>
      <th>登録者</th>
      <th>登録日時</th>
      <th>更新日時</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.name %></td>
        <td><%= task.content %></td>
        <td><%= task.image %></td>
        <td><%= task.due_date_at %></td>
        <td><%= task.assignee.username %></td>
        <td><%= task.user.username %></td>
        <td><%= task.created_at %></td>
        <td><%= task.updated_at %></td>
        <td><%= link_to 'Show', task %></td>
        <td><%= link_to 'Edit', edit_task_path(task) %></td>
        <td><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Task', new_task_path %>
